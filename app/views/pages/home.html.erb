<div id="hero-wrapper">
  <div class="container">
    <div class="row">

      <div class="col-xs-12">

        <div class="main-heading-group">
          <h1>hello! find a quest</h1>
          <h2>discover board game events around you</h2>
        </div>

        <div class="hero-search">
          <%= form_tag(events_path, :method => "get", id: "search-form", class: "center-block") do %>
            <div class="form-group">
              <%= text_field_tag :search_loc, params[:search_loc], placeholder: "where?", class: "search-location form-control input-size-large" %>
              <%= text_field_tag :search_date, params[:search_date], data:{ provide:'datepicker'}, placeholder: "date", class: "form-control input-size-large datepicker", placeholder: "when?" %>
              <%= text_field_tag :search_game, params[:search_game], placeholder: "what game?", class: "form-control input-size-large" %>
              <%= submit_tag "search", :name => nil, class: "btn brand-alt-btn brand-btn-yellow" %>
            </div>
          <% end %>
        </div>

      </div>

    </div>
  </div>
</div>

<div class="container">
  <div class="row is-flex">
    <div class="col-sm-9 hp-info">
      <h3>About QuestBoard</h3>
      <p>QuestBoard is your new way of meeting new boardgamers, playing games with friends, tracking your achievements, creating a character and leveling it up. Meet new people while translating those experiences into virtual ones as well. Keep track of your your wins and brag to your friends about all your achievements. Create an avatar, level it up by playing boardgames, and earn coins to buy new items. We at QuestBoard want to welcome you to join a new way of playing gamesâ€¦ within games. Because, honestly, you can never have enough of that.</p>
    </div>

    <div class="col-sm-3 signup-accent">
      <span>Are you ready to level your board game stats? Let's go!</span>
      <%= link_to t(".sign_in", default: "sign up"), new_user_registration_path, class: "btn brand-btn brand-btn-red-invert" %>
    </div>

  </div>
</div>

<div class="hp-cards-wpr">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <h3>Happening quests</h3>
      </div>

      <% @events.each do |event| %>
        <div class="col-sm-6 col-md-4">
          <div class="card">
            <div class="quest-header">
              <div class="quest-date-box">
                <span class="quest-date">
                  <time class="date" datetime="<%= event.datetime %>"></time>
                </span>
                <span class="quest-time">
                  <time class="time" datetime="<%= event.datetime %>"></time>
                </span>
              </div>
              <div class="quest-top-info">
                <span class="game-title">
                  <%= event.game.name %>
                </span>
                <span class="quest-distance">
                  <i class="fa fa-map-marker" aria-hidden="true"></i>
                  <% if @location != nil %>
                    <%= event.distance_from(@location, :units=>:kms).round(1) %> km from you
                  <% else @location = "Tokyo Station" %>
                    No location specified
                  <% end %>
                </span>
              </div>
            </div>

            <div class="quest-main">
              <span class="event-title"><%= event.title.split.map { |i| i.capitalize }.join(' ') %></span>
              <span class="rewards-title">Rewards</span>

              <div class="quest-rewards">
                <div class="reward-slot">
                  <%= image_tag("exp.svg") %>
                  <span class="reward-amount"><%= event.experience %></span>
                </div>
                <div class="reward-slot">
                  <%= image_tag("coin.svg") %>
                  <span class="reward-amount"><%= event.coins %></span>
                </div>
              </div>
            </div>

            <div class="quest-footer">

              <div class="event-host">
                <%= image_tag("coin.svg") %>
                <span class="host-pin">GM</span>
              </div>

              <span class="player-count"><%= event.players.length %>/<%= event.game.max_players %> PLAYERS</span>
              <%= link_to "See details", event_path(event), class: "btn brand-btn brand-btn-red" %>

            </div>
          </div>
        </div>
      <% end %>

    </div>
  </div>

</div>
