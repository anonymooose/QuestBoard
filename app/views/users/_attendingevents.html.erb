<% def current_same?
  current_user == @user
end %>
<% if !@user.events.blank? %>
    <p><%= current_same? ? 'Your' : "#{@user.username}'s" %> attended event stats:</p>
    <%# if user has active events %>
    <% if @user.events.where('datetime > ?', Time.now).any? %>
      <p>Upcoming events <%= current_same? ? 'you are' : "#{@user.username} is" %> going to:</p>
      <ul>
        <% @user.events.where('datetime > ?', Time.now).each do |event| %>
          <li><%= link_to "#{event.title}", event_path(event) %></li>
        <% end %>
      </ul>
    <% else %>
      <%# If user has no active events %>
      <p><%= current_same? ? "You aren't" : "#{@user.username} isn't" %> attending any upcoming events.</p>
  <% end %>
  <p>Total events joined: <%= @user.events.length %></p>
  <% else %>
    <%# If never played %>
    <p><%= current_same? ? "You haven't" : "#{@user.username} hasn't" %> joind any events yet!</p>
<% end %>
